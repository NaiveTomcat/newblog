<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>小米路由器3G安装openwrt的折腾记录 | NaiveTomcat&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/img/favicon.ico">
    <script src="https://www.googletagmanager.com/gtag/js?id=G-DRRYLMDHK1" async="true"></script>
    <script> window.dataLayer = window.dataLayer || [];                function gtag(){dataLayer.push(arguments);}                gtag('js', new Date());                gtag('config', 'G-DRRYLMDHK1');</script>
    <meta name="description" content="NaiveTomcat的博客，什么都写，Linux使用&踩坑，深度学习，后端开发，程序语言等">
    <meta name="keywords" content="个人技术博客,后端,后端开发,技术文档,学习,面试,程序语言,编译器去,go,c++,alolang,git,github,markdown">
    <meta name="theme-color" content="#11a8cd">
    <meta name="baidu-site-verification" content="code-RQXBsNYt4g">
    <link rel="preload" href="/assets/css/0.styles.f9eb632a.css" as="style"><link rel="preload" href="/assets/js/app.50758d25.js" as="script"><link rel="preload" href="/assets/js/2.0e0d002b.js" as="script"><link rel="preload" href="/assets/js/10.f9aac277.js" as="script"><link rel="prefetch" href="/assets/js/11.4feee2f7.js"><link rel="prefetch" href="/assets/js/12.95b24e15.js"><link rel="prefetch" href="/assets/js/13.ab78217c.js"><link rel="prefetch" href="/assets/js/14.9b5a733b.js"><link rel="prefetch" href="/assets/js/15.3090674b.js"><link rel="prefetch" href="/assets/js/3.bb82063e.js"><link rel="prefetch" href="/assets/js/4.ae66ff60.js"><link rel="prefetch" href="/assets/js/5.3790beef.js"><link rel="prefetch" href="/assets/js/6.99067664.js"><link rel="prefetch" href="/assets/js/7.4e92a695.js"><link rel="prefetch" href="/assets/js/8.7673ead9.js"><link rel="prefetch" href="/assets/js/9.46714bcb.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f9eb632a.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/EB-logo.png" alt="NaiveTomcat's blog" class="logo"> <span class="site-name can-hide">NaiveTomcat's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/categories/" class="nav-link">分类</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/friends/" class="nav-link">友链</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://avatars.githubusercontent.com/u/50436951"> <div class="blogger-info"><h3>NaiveTomcat</h3> <span>冰冻三尺，非一日之寒</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/categories/" class="nav-link">分类</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/friends/" class="nav-link">友链</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>小米路由器3G安装openwrt的折腾记录</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/05c9b1/#前言" class="sidebar-link">前言</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/05c9b1/#开始折腾" class="sidebar-link">开始折腾</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/05c9b1/#总结" class="sidebar-link">总结</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-33863c7e><div class="articleInfo" data-v-33863c7e><!----> <div class="info" data-v-33863c7e><div title="作者" class="author iconfont icon-touxiang" data-v-33863c7e><a href="https://github.com/NaiveTomcat" target="_blank" title="作者" class="beLink" data-v-33863c7e>NaiveTomcat</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-33863c7e><a href="javascript:;" data-v-33863c7e>2021-04-21</a></div> <div title="分类" class="date iconfont icon-wenjian" data-v-33863c7e><a href="/categories/?category=%E9%9A%8F%E7%AC%94" data-v-33863c7e>随笔 </a><a href="/categories/?category=%E5%BC%80%E5%8F%91" data-v-33863c7e>开发 </a></div></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">
          小米路由器3G安装openwrt的折腾记录
        </h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p>这篇博文其实记录的大概是将近两个月之前的事情了，但是这两个月也在断断续续折腾，现在应该折腾的差不多了，所以现在才写。</p> <p>宿舍以前用的是一个TP-Link的WR886n Rev 2的路由器（非常老了），甚至连IPv6都不支持，导致因为要刷pt，宿舍原来的网络拓扑是入户网线接交换机，再接到我的台式机上，台式机拨号做第一轮NAT，第二块网卡再接到路由器上。因为我台式机装的Arch Linux，内核更新的比较勤，每次更完内核都得重启（不然会出玄学错误），所以网络可用性也没啥保证。</p> <p>于是这个学期，我打算换个路由器。开学的时候从网管协会某学长那里收了一个小米路由器4A千兆版，原来刷的Pandavan，为了刷openwrt拆了机焊了串口线，结果不知道什么原因，用SPI夹子读闪存的时候可能把它烧了吧，于是第二天从闲鱼上买了个R3G，初始版本带USB的，大概第四天到的。</p> <h2 id="开始折腾"><a href="#开始折腾" class="header-anchor">#</a> 开始折腾</h2> <p>R3Gv1刷openwrt的步骤挺简单的：先刷上官方开发版系统，然后打开ssh，把openwrt的initramfs和kernel镜像刷进去就行了。然后就是标准套路：改opkg的镜像源，安些必要的软件，然后联网。具体可以参考openwrt官方Wiki，我就是照着那上面一步一步刷好的。</p> <p>本来想做双线均衡的，也都配好了，最后想想没啥必要，就没开。</p> <p>IPv6就是另一个故事了。学校作为CERNET的节点，宿舍拨号的v4都是公网的IP（但是有防火墙，出去还是走运营商的NAT，入站TCP屏蔽，校内随便访问），但是v6居然是/128的单IP。。。于是配了一下午的NAT6，整的头挺大的。后来不知道为啥NAT6又经常抽风。。。也懒得管了。</p> <p>后来发现了一个问题：纯v6的站好像没见到过，我需要v6也就是刷刷pt，于是买了个4T的监控盘，插在3.5寸的硬盘盒里插到路由器上，路由器上安个transmission，再配个SAMBA，就可以24*7的刷pt了，而且要看啥片子从挂载的网络驱动器上直接看就行。</p> <p>但是，最近要去南京录节目，transmission web UI好办，学校有VPN能连回来，但是samba就不行了。。。于是今天配了个webdav，加上VPN，应该能在外面连回来吧（</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>宿舍里的路由器其实能做很多事情，比如刷pt，做NAS等。其实除了用硬路由以外，也能用软路由，有一同学的宿舍就用了个J4105的板子做软路由，上面还跑了一些别的业务（比如Windows虚拟机），前几天因为裸板直接挂墙上有安全隐患被宿管勒令整改了👀。但是综合成本性能等方面考虑，用R3G硬路由还挺香的。毕竟MT7621的性能算是17年旗舰了，有硬路由加速，50M带宽跑满的基础上基本不占CPU。想折腾网络的同学可以先从宿舍网络做起，进而了解整个网络栈。就是这样了。</p></div></div> <!----> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=%E5%BC%80%E5%8F%91" title="标签">#开发</a><a href="/tags/?tag=%E6%9D%82%E9%A1%B9" title="标签">#杂项</a></div> <!----></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/0a65b4/"><div>DN42网络Peer信息</div></a> <span>05-08</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/787b52/"><div>在机械革命Umi Pro 3的Windows上安装tensorflow的踩坑记录（With RTX 3060 Laptop）</div></a> <span>04-13</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/c26a43/"><div>博客重启</div></a> <span>04-12</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:tomdang@naivetomcat.cn" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/NaiveTomcat" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2021
    <span>NaiveTomcat | MIT License | <a href="https://icp.gov.moe" target="_blank">萌ICP备 </a><a href="https://icp.gov.moe/?keyword=20212004" target="_blank"> 20212004号</a> | <a href="http://beian.miit.gov.cn/" target="_blank">陕ICP备20002453号</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">跟随系统</li><li class="iconfont icon-rijianmoshi">浅色模式</li><li class="iconfont icon-yejianmoshi">深色模式</li><li class="iconfont icon-yuedu">阅读模式</li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.50758d25.js" defer></script><script src="/assets/js/2.0e0d002b.js" defer></script><script src="/assets/js/10.f9aac277.js" defer></script>
  </body>
</html>